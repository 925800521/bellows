/*! bellows 2.0.0 2014-07-10 */
(function(t){function e(t,e){this.init(t,e)}var i="bellows",n=function(){},o=".bellows__item",s=".bellows__content",l="bellows--is-open",r="bellows--is-opening",a="bellows--is-closing",p={itemHeader:"> .bellows__item > .bellows__header",itemContentWrapper:"> .bellows__content-wrapper",itemContent:"> .bellows__item > .bellows__content"};return e.DEFAULTS={singleItemOpen:!1,event:"tap",duration:200,easing:"swing",open:n,opened:n,close:n,closed:n},e.prototype.init=function(i,n){this.options=t.extend(!0,{},e.DEFAULTS,n),this.$bellows=t(i).find(p.itemContent).wrap('<div class="bellows__content-wrapper" />').end(),this._bindEvents()},e.prototype._bindEvents=function(){var e=this;this.$bellows.find(p.itemHeader).bind(this.options.event,function(i){i.preventDefault(),!e.animating&&e.toggle(t(this).parent())})},e.prototype.toggle=function(t){t=this._item(t),this[t.hasClass(l)?"close":"open"](t)},e.prototype.open=function(e){if(e=this._item(e),!e.hasClass(l)){var i=this,n=e.find(p.itemContentWrapper);n.find(s),this.options.singleItemOpen&&this.$bellows.find("."+l).each(function(){i.close(t(this))}),this._trigger("open",{item:e}),n.velocity("slideDown",{begin:function(){i._setHeight(parseFloat(t.Velocity.CSS.getPropertyValue(i.$bellows[0],"height"))+parseFloat(t.Velocity.CSS.getPropertyValue(n[0],"height"))),e.addClass(r),i.animating=!0},duration:this.options.duration,easing:this.options.easing,complete:function(){i.animating=!1,e.removeClass(r).addClass(l),i._resetItemStyle(n),i._trigger("opened",{item:e})}})}},e.prototype.close=function(e){if(e=this._item(e),e.hasClass(l)){var i=this,n=e.find(p.itemContentWrapper);this._trigger("close",{item:e}),n.velocity("slideUp",{begin:function(){i._setHeight(t.Velocity.CSS.getPropertyValue(i.$bellows[0],"height")),e.removeClass(l).addClass(a),i.animating=!0},duration:this.options.duration,easing:this.options.easing,complete:function(){i.animating=!1,e.removeClass(a),i._resetItemStyle(n),i._trigger("closed",{item:e})}})}},e.prototype._resetItemStyle=function(t){var e=this;t.removeAttr("style"),e._setHeight()},e.prototype._setHeight=function(t){this.$bellows.css("height",t||"")},e.prototype._item=function(t){return"number"==typeof t&&(t=this.$bellows.find(o).eq(t)),t},e.prototype._trigger=function(e,n){e in this.options&&this.options[e].call(this,t.Event(i+":"+e,{bubbles:!1}),n)},t.fn.bellows=function(n){var o=Array.prototype.slice.call(arguments);return this.each(function(){var s=t(this),l=s.data(i);l||s.data(i,l=new e(this,n)),"string"==typeof n&&0!==n.indexOf("_")&&l[n].apply(l,o.length>1?o.slice(1):null)})},t.fn.bellows.Constructor=e,t("[data-bellows]").bellows(),t})(window.jQuery||window.Zepto);